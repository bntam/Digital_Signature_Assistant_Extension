# HÆ°á»›ng dáº«n sá»­ dá»¥ng tÃ­nh nÄƒng Cáº­p nháº­t BHYT XML130

## Tá»•ng quan

TÃ­nh nÄƒng nÃ y cho phÃ©p cáº­p nháº­t tá»± Ä‘á»™ng thÃ´ng tin cÃ¡ch dÃ¹ng thuá»‘c cho cÃ¡c Ä‘Æ¡n thuá»‘c Báº£o hiá»ƒm Y táº¿ XML130. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng:

1. TÃ¬m kiáº¿m bá»‡nh nhÃ¢n theo MÃ£ liÃªn káº¿t
2. Láº¥y danh sÃ¡ch thuá»‘c cá»§a bá»‡nh nhÃ¢n
3. Lá»c cÃ¡c loáº¡i thuá»‘c cáº§n cáº­p nháº­t: **Cam tháº£o**, **Äá»™c hoáº¡t**, **Äáº¡i tÃ¡o**
4. Cáº­p nháº­t cÃ¡ch dÃ¹ng tá»± Ä‘á»™ng vÃ  lÆ°u vÃ o há»‡ thá»‘ng

## CÃ¡ch sá»­ dá»¥ng

### 1. Truy cáº­p trang cáº­p nháº­t

Má»Ÿ file `bhyt-xml130-update.html` trong extension hoáº·c truy cáº­p trá»±c tiáº¿p tá»« há»‡ thá»‘ng BV Phuyen.

### 2. ÄÄƒng nháº­p há»‡ thá»‘ng

- Äáº£m báº£o Ä‘Ã£ Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng BV Phuyen
- Kiá»ƒm tra tráº¡ng thÃ¡i káº¿t ná»‘i á»Ÿ gÃ³c pháº£i trÃªn
- Náº¿u chÆ°a Ä‘Äƒng nháº­p, há»‡ thá»‘ng sáº½ hiá»ƒn thá»‹ popup Ä‘Äƒng nháº­p

### 3. Nháº­p danh sÃ¡ch MÃ£ liÃªn káº¿t

Trong Ã´ textarea lá»›n:
- Nháº­p tá»«ng MÃ£ liÃªn káº¿t trÃªn má»™t dÃ²ng
- VÃ­ dá»¥:
  ```
  MLC001
  MLC002
  MLC003
  ```
- Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng Ä‘áº¿m sá»‘ lÆ°á»£ng mÃ£ Ä‘Ã£ nháº­p

### 4. Xá»­ lÃ½ dá»¯ liá»‡u

1. Click nÃºt **"â–¶ï¸ Xá»­ lÃ½"**
2. XÃ¡c nháº­n thÃ´ng tin xá»­ lÃ½
3. Há»‡ thá»‘ng báº¯t Ä‘áº§u xá»­ lÃ½ tá»«ng mÃ£ liÃªn káº¿t:
   - Thanh tiáº¿n trÃ¬nh hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng Ä‘Ã£ xá»­ lÃ½
   - Káº¿t quáº£ hiá»ƒn thá»‹ ngay láº­p tá»©c cho tá»«ng mÃ£

### 5. Xem káº¿t quáº£

Pháº§n **"Káº¿t quáº£ xá»­ lÃ½"** hiá»ƒn thá»‹:
- âœ… Sá»‘ lÆ°á»£ng thÃ nh cÃ´ng
- âŒ Sá»‘ lÆ°á»£ng lá»—i
- ğŸ’Š Tá»•ng sá»‘ thuá»‘c Ä‘Ã£ cáº­p nháº­t

Má»—i káº¿t quáº£ bao gá»“m:
- MÃ£ liÃªn káº¿t
- ThÃ´ng tin bá»‡nh nhÃ¢n
- Danh sÃ¡ch thuá»‘c Ä‘Ã£ cáº­p nháº­t
- CÃ¡ch dÃ¹ng má»›i cho má»—i thuá»‘c
- ThÃ´ng bÃ¡o lá»—i (náº¿u cÃ³)

## CÃ¡ch dÃ¹ng thuá»‘c máº·c Ä‘á»‹nh

Há»‡ thá»‘ng tá»± Ä‘á»™ng Ã¡p dá»¥ng cÃ¡c cÃ¡ch dÃ¹ng sau:

| TÃªn thuá»‘c | CÃ¡ch dÃ¹ng |
|-----------|-----------|
| Cam tháº£o  | Uá»‘ng ngÃ y 2 láº§n, sÃ¡ng vÃ  tá»‘i, sau Äƒn |
| Äá»™c hoáº¡t  | Uá»‘ng ngÃ y 2 láº§n, sÃ¡ng vÃ  tá»‘i, sau Äƒn |
| Äáº¡i tÃ¡o   | Uá»‘ng ngÃ y 3 láº§n, sau Äƒn |

## Xá»­ lÃ½ lá»—i

### CÃ¡c lá»—i phá»• biáº¿n:

1. **"KhÃ´ng tÃ¬m tháº¥y bá»‡nh nhÃ¢n"**
   - Kiá»ƒm tra láº¡i MÃ£ liÃªn káº¿t
   - Äáº£m báº£o bá»‡nh nhÃ¢n tá»“n táº¡i trong há»‡ thá»‘ng

2. **"KhÃ´ng cÃ³ dá»¯ liá»‡u thuá»‘c"**
   - Bá»‡nh nhÃ¢n chÆ°a cÃ³ Ä‘Æ¡n thuá»‘c
   - Kiá»ƒm tra láº¡i thÃ´ng tin bá»‡nh nhÃ¢n

3. **"KhÃ´ng cÃ³ thuá»‘c cáº§n cáº­p nháº­t"**
   - Bá»‡nh nhÃ¢n khÃ´ng cÃ³ cÃ¡c loáº¡i thuá»‘c: Cam tháº£o, Äá»™c hoáº¡t, Äáº¡i tÃ¡o
   - ÄÃ¢y lÃ  trÆ°á»ng há»£p bÃ¬nh thÆ°á»ng, khÃ´ng pháº£i lá»—i

4. **"Authentication required"**
   - PhiÃªn Ä‘Äƒng nháº­p háº¿t háº¡n
   - ÄÄƒng nháº­p láº¡i vÃ o há»‡ thá»‘ng

## TÃ­nh nÄƒng bá»• sung

### NÃºt Clear (ğŸ—‘ï¸ XÃ³a)
- XÃ³a toÃ n bá»™ dá»¯ liá»‡u trong Ã´ nháº­p
- Reset sá»‘ Ä‘áº¿m mÃ£ liÃªn káº¿t

### ThÃ´ng bÃ¡o realtime
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o cho má»—i bÆ°á»›c xá»­ lÃ½
- Tá»± Ä‘á»™ng áº©n sau 5 giÃ¢y
- Click Ã—â€‹ Ä‘á»ƒ Ä‘Ã³ng thá»§ cÃ´ng

### Cuá»™n tá»± Ä‘á»™ng
- Káº¿t quáº£ má»›i nháº¥t tá»± Ä‘á»™ng cuá»™n vÃ o view
- Dá»… dÃ ng theo dÃµi tiáº¿n trÃ¬nh

## API Endpoints sá»­ dá»¥ng

1. **TÃ¬m bá»‡nh nhÃ¢n**: `NTU02D021.EV001`
   - Input: MÃ£ liÃªn káº¿t (MA_LK, MABENHAN, MABENHNHAN)
   - Output: ThÃ´ng tin bá»‡nh nhÃ¢n

2. **Láº¥y danh sÃ¡ch thuá»‘c**: `NTU01H051.01`
   - Input: HOSOBENHANID, TIEPNHANID
   - Output: Danh sÃ¡ch thuá»‘c

3. **Cáº­p nháº­t cÃ¡ch dÃ¹ng**: `NTU.UPD.MEDICINE.USAGE`
   - Input: THUOCID, HOSOBENHANID, TIEPNHANID, CACHDUNG
   - Output: Káº¿t quáº£ cáº­p nháº­t

## LÆ°u Ã½ ká»¹ thuáº­t

- Há»‡ thá»‘ng xá»­ lÃ½ tuáº§n tá»± tá»«ng mÃ£ liÃªn káº¿t (khÃ´ng song song)
- CÃ³ delay 500ms giá»¯a cÃ¡c request Ä‘á»ƒ trÃ¡nh quÃ¡ táº£i server
- Káº¿t quáº£ Ä‘Æ°á»£c hiá»ƒn thá»‹ ngay sau khi xá»­ lÃ½ xong má»—i mÃ£
- Táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c sanitize Ä‘á»ƒ trÃ¡nh XSS

## Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á», vui lÃ²ng:
1. Kiá»ƒm tra console log (F12)
2. Screenshot mÃ n hÃ¬nh lá»—i
3. LiÃªn há»‡ bá»™ pháº­n IT BV Phuyen

---

**PhiÃªn báº£n**: 1.0  
**Cáº­p nháº­t**: 2025-01-10  
**Developer**: BV Phuyen IT Department
